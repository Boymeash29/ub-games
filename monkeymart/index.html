<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,minimal-ui,shrink-to-fit=no" name="viewport">
<meta content="yes" name="apple-mobile-web-app-capable">
<title>Monkey Mart</title>
<meta name="description" content="Monkey Mart is an idle/management game where you manage a monkey-run supermarket, growing produce, selling items, and hiring assistants.">
<link rel="shortcut icon" href="favicon.ico">
<meta content="summary_large_image" name="twitter:card">
<meta content="Monkey Mart Game" name="twitter:title">
<meta content="bg_loading.png" name="twitter:image:src">
<meta content="Monkey Mart Game" property="og:title">
<meta content="Monkey Mart is an idle/management game where you manage a monkey-run supermarket, growing produce, selling items, and hiring assistants." property="og:description">
<meta content="bg_loading.png" property="og:image">
<link rel="manifest" href="manifest.json">
<link href="style.css" rel="stylesheet">
<script src="patch/js/poki-sdk.js"></script>
<div class="canvas-app-container" id="app-container">
	<div class="canvas-app-canvas-container" id="canvas-container">
		<canvas class="canvas-app-canvas" height="640" id="canvas" tabindex="1" width="960"></canvas>
	</div>
	<div class="buttons-background"></div>
	<div id="progress-bar-root" style="position:absolute;bottom:16%;left:50%;visibility:hidden;z-index:4">
		<img id="progress-bar-bg" src="load_bar_bg.png">
		<img id="progress-bar-fg" src="load_bar_fg.png" style="position:absolute;clip:rect(0,0,0,0)">
	</div>
</div>
<script id="engine-loader" type="text/javascript" src="dmloader.js"></script>
<script id="engine-setup">
    var extra_params = {
        archive_location_filter: function(e) {
            return "archive" + e
        },
        engine_arguments: ["--verify-graphics-calls=false"],
        custom_heap_size: 134217728,
        full_screen_container: "#canvas-container",
        disable_context_menu: !0
    };
    Module.INITIAL_MEMORY = extra_params.custom_heap_size, Module.onRuntimeInitialized = function() {
        Module.runApp("canvas", extra_params)
    }, Module.locateFile = function(e, n) {
        return "dmengine.wasm" != e && "dmengine_release.wasm" != e && "dmengine_headless.wasm" != e || (e = "MonkeyMart.wasm"), n + e
    };
    var is_iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream,
        buttonHeight = 0,
        prevInnerWidth = -1,
        prevInnerHeight = -1;

    function resize_game_canvas() {
        is_iOS && window.scrollTo(0, 0);
        var e = document.getElementById("app-container"),
            n = document.getElementById("canvas"),
            t = document.getElementById("progress-bar-root"),
            a = document.getElementById("progress-bar-fg"),
            r = document.getElementById("progress-bar-bg"),
            i = window.innerWidth,
            o = window.innerHeight - buttonHeight;
        if (prevInnerWidth != i || prevInnerHeight != o) {
            var d = 960,
                l = 640;
            prevInnerWidth = i, prevInnerHeight = o;
            d = i, l = o, e.style.width = d + "px", e.style.height = l + buttonHeight + "px";
            var s = (n.width = d) < (n.height = l) ? d : l;
            r.width = Math.min(Math.ceil(.06 * s * 300 / 24), .8 * d), r.style.marginLeft = -r.width / 2 + "px", a.width = Math.ceil(1 * r.width), a.style.marginTop = 0 * r.width * 0 / 2 + "px", a.style.marginLeft = -r.width / 2 - a.width / 2 + "px", t.style.bottom = Math.ceil(.08 * l + buttonHeight) + "px"
        }
    }
    resize_game_canvas(), window.addEventListener("resize", resize_game_canvas, !1), window.addEventListener("orientationchange", resize_game_canvas, !1), window.addEventListener("keydown", function(e) {
        -1 < [32, 37, 38, 39, 40].indexOf(e.keyCode) && e.preventDefault()
    }, !1), window.addEventListener("focus", resize_game_canvas, !1),
        function() {
            var y = function(e) {
                    for (var n = "", t = 7; 0 <= t; t--) n += "0123456789abcdef".charAt(e >> 4 * t & 15);
                    return n
                },
                I = function(e, n) {
                    var t = (65535 & e) + (65535 & n);
                    return (e >> 16) + (n >> 16) + (t >> 16) << 16 | 65535 & t
                },
                A = function(e, n) {
                    return e << n | e >>> 32 - n
                };
            window._HashSHA1 = function(e) {
                for (var n = function(e) {
                    for (var n = 1 + (e.length + 8 >> 6), t = new Array(16 * n), a = 0; a < 16 * n; a++) t[a] = 0;
                    for (a = 0; a < e.length; a++) t[a >> 2] |= e.charCodeAt(a) << 24 - a % 4 * 8;
                    return t[a >> 2] |= 128 << 24 - a % 4 * 8, t[16 * n - 1] = 8 * e.length, t
                }(e), a = new Array(80), r = 1732584193, i = -271733879, o = -1732584194, d = 271733878, l = -1009589776, s = 0; s < n.length; s += 16) {
                    for (var c = r, u = i, h = o, v = d, g = l, m = 0; m < 80; m++) a[m] = m < 16 ? n[s + m] : A(a[m - 3] ^ a[m - 8] ^ a[m - 14] ^ a[m - 16], 1), t = I(I(A(r, 5), (w = i, f = o, M = d, (_ = m) < 20 ? w & f | ~w & M : _ < 40 ? w ^ f ^ M : _ < 60 ? w & f | w & M | f & M : w ^ f ^ M)), I(I(l, a[m]), (p = m) < 20 ? 1518500249 : p < 40 ? 1859775393 : p < 60 ? -1894007588 : -899497514)), l = d, d = o, o = A(i, 30), i = r, r = t;
                    r = I(r, c), i = I(i, u), o = I(o, h), d = I(d, v), l = I(l, g)
                }
                var p, _, w, f, M;
                return y(r) + y(i) + y(o) + y(d) + y(l)
            }
        }();
    var old_preloadAndCallMain = Module._preloadAndCallMain;
    Module._preloadAndCallMain = function() {
        var e = DMSYS.GetUserPersistentDataRoot(),
            n = _HashSHA1("MonkeyMart");
        try {
            FS.unlink(e + "/." + n + "/liveupdate.arcd")
        } catch (e) {}
        try {
            FS.unlink(e + "/." + n + "/liveupdate.arci")
        } catch (e) {}
        try {
            FS.unlink(e + "/." + n + "/liveupdate.arci.tmp")
        } catch (e) {}
        try {
            FS.unlink(e + "/." + n + "/liveupdate.mounts")
        } catch (e) {}
        Module._archiveLoaded, old_preloadAndCallMain()
    }
</script>
<script id="engine-start">
    var currentPercentage = 0;
    Progress.updateProgress = function(e) {
        Progress.notifyListeners(e), e < currentPercentage && (e = currentPercentage), currentPercentage = e;
        var r = document.getElementById("progress-bar-fg");
        (r.style.clip = "rect(0px," + r.width * e / 100 + "px," + r.height + "px,0px)", isNaN(e)) && (document.getElementById("progress-bar-root").style.visibility = "hidden")
    }, Progress.addProgress = function() {
        document.getElementById("progress-bar-root").style.visibility = "visible"
    }, Progress.removeProgress = function() {
        document.getElementById("progress-bar-root").style.visibility = "hidden", Module.canvas.style.background = ""
    }, EngineLoader.stream_wasm = !1, EngineLoader.load("canvas", "MonkeyMart")
</script>
<script>
    function poki_showBanner(n) {
        PokiSDK.displayAd(document.getElementById(n), "320x50")
    }

    function poki_showBigBanner(n) {
        PokiSDK.displayAd(document.getElementById(n), "728x90")
    }

    function poki_hideBanner(n) {
        PokiSDK.destroyAd(document.getElementById(n))
    }
</script>
<script id="poki-sdk-setup">
    PokiSDK.gameLoadingStart();
    var data = {};
    var isLoadFinished = false;
    Progress.addListener(function(percentage) {
        data.percentageDone = percentage / 100;
        if (!isLoadFinished) PokiSDK.gameLoadingProgress(data);
        if (percentage == 100 && !isLoadFinished) {
            PokiSDK.gameLoadingFinished();
            isLoadFinished = true;
        }
    });
    Module['onRuntimeInitialized'] = function() {
        PokiSDK.init().then(() => {
            Module.runApp("canvas", extra_params);
        }).catch(() => {
            Module.runApp("canvas", extra_params);
        });
    };
</script>
<script src="GameAnalytics.js"></script>